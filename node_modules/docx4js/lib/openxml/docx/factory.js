'use strict';

Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.default = factory;

var _model = require('./model');

var _model2 = _interopRequireDefault(_model);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function attr(node) {
	var name = arguments.length <= 1 || arguments[1] === undefined ? 'w:val' : arguments[1];

	return node ? node.attr(name) : undefined;
}

function factory(wXml, doc, parent, more) {
	var tag = wXml.localName,
	    swap;

	var extended = factory.extend.apply(factory, arguments);

	if (extended) return extended;else if ('document' == tag) return new (require('./model/document'))(wXml, doc, parent);else if ('styles' == tag) return new (require('./model/documentStyles'))(wXml, doc);else if ('abstractNum' == tag) return new (require('./model/style/numberingDefinition'))(wXml, doc);else if ('num' == tag) return new (require('./model/style/list'))(wXml, doc);else if ('style' == tag) {
		switch (wXml.attr('w:type')) {
			case 'paragraph':
				return new (require('./model/style/paragraph'))(wXml, doc);
			case 'character':
				return new (require('./model/style/inline'))(wXml, doc);
			case 'table':
				return new (require('./model/style/table'))(wXml, doc);
			case 'numbering':
				return new (require('./model/style/numbering'))(wXml, doc);
		}
	} else if ('docDefaults' == tag) return new (require('./model/style/document'))(wXml, doc);else if ('body' == tag) return new (require('./model/body'))(wXml, doc, parent);else if ('p' == tag) {
		var styleId = attr(wXml.$1('>pPr>pStyle'), 'w:val'),
		    style = doc.style.get(styleId);
		if (wXml.$1('>pPr>numPr') || style && style.getNumId() != -1) return new (require('./model/list'))(wXml, doc, parent);

		var outlineLvl = -1,
		    tmp = void 0;
		if (style) outlineLvl = style.getOutlineLevel();else if (tmp = wXml.$1('>pPr>outlineLvl')) {
			tmp = parseInt(attr(tmp));
			outlineLvl = parseInt(tmp);
		}

		if (outlineLvl != -1) return new (require('./model/heading'))(wXml, doc, parent, outlineLvl);

		return new (require('./model/paragraph'))(wXml, doc, parent);
	} else if ('r' == tag) {
		var _style = doc.style.get(attr(wXml.$1('>rPr>rStyle'), 'w:val'));

		var _outlineLvl = -1,
		    _tmp = void 0;
		if (_style) _outlineLvl = _style.getOutlineLevel();else if (_tmp = wXml.$1('>rPr>outlineLvl')) {
			_tmp = attr(_tmp);
			_outlineLvl = parseInt(_tmp);
		}

		if (_outlineLvl != -1) return new (require('./model/headingInline'))(wXml, doc, parent, _outlineLvl);

		if (wXml.childNodes.length == 1 || wXml.childNodes == 2 && wXml.firstChild.localName == 'rPr') {
			switch (wXml.lastChild.localName) {
				case 'fldChar':
				case 'instrText':
					return factory(wXml.lastChild, doc, parent);
			}
		}

		return new (require('./model/inline'))(wXml, doc, parent);
	} else if ('instrText' == tag) return new (require('./model/fieldInstruct'))(wXml, doc, parent);else if ('t' == tag) return new (require('./model/text'))(wXml, doc, parent);else if ('sym' == tag && wXml.parentNode.localName == 'r') return new (require('./model/symbol'))(wXml, doc, parent);else if ('softHyphen' == tag && wXml.parentNode.localName == 'r') return new (require('./model/softHyphen'))(wXml, doc, parent);else if ('noBreakHyphen' == tag && wXml.parentNode.localName == 'r') return new (require('./model/noBreakHyphen'))(wXml, doc, parent);else if ('tab' == tag && wXml.parentNode.localName == 'r') return new (require('./model/tab'))(wXml, doc, parent);else if ('fldSimple' == tag) return new (require('./model/fieldSimple'))(wXml, doc, parent);else if ('fldChar' == tag) {
		switch (wXml.attr('w:fldCharType')) {
			case 'begin':
				return new (require('./model/fieldBegin'))(wXml, doc, parent);
				break;
			case 'end':
				return new (require('./model/fieldEnd'))(wXml, doc, parent);
				break;
			case 'separate':
				return new (require('./model/fieldSeparate'))(wXml, doc, parent);
				break;
		}
	} else if ('tbl' == tag) return new (require('./model/table'))(wXml, doc, parent);else if ('tr' == tag) return new (require('./model/row'))(wXml, doc, parent);else if ('tc' == tag) return new (require('./model/cell'))(wXml, doc, parent);else if ('br' == tag) return new (require('./model/br'))(wXml, doc, parent);else if ('hyperlink' == tag && 'p' == wXml.parentNode.localName) return new (require('./model/hyperlink'))(wXml, doc, parent);else if ('AlternateContent' == tag) return new (require('./model/drawingAnchor'))(wXml, doc, parent);else if ('wsp' == tag) return new (require('./model/shape'))(wXml, doc, parent);else if ('inline' == tag) {
		var type = wXml.$1('>graphic>graphicData').attr('uri').split('/').pop();
		switch (type) {
			case 'picture':
				return new (require('./model/image'))(wXml, doc, parent);
			case 'diagram':
				return new (require('./model/diagram'))(wXml, doc, parent);
			case 'chart':
				return new (require('./model/chart'))(wXml, doc, parent);
			default:
				console.error('inline ' + type + ' is not suppored yet.');
		}
	} else if ('sdt' == tag) {
		var elBinding = wXml.$1('>sdtPr>dataBinding');
		if (elBinding) {
			//properties
			var path = attr(elBinding, 'w:xpath'),
			    d = path.split(/[\/\:\[]/),
			    name = (d.pop(), d.pop());
			return new (require('./model/documentProperty'))(wXml, doc, parent, name);
		} else {
			//controls
			var elType = wXml.$1('>sdtPr').$1("text, picture, docPartList, comboBox, dropDownList, date, checkbox");
			tag = elType ? elType.localName : 'richtext';

			extended = factory.extendControl.apply(factory, [tag].concat(Array.prototype.slice.call(arguments)));

			if (extended) return extended;else if ('text' == tag) return new (require('./model/control/text'))(wXml, doc, parent);else if ('picture' == tag) return new (require('./model/control/picture'))(wXml, doc, parent);else if ('docPartList' == tag) return new (require('./model/control/gallery'))(wXml, doc, parent);else if ('comboBox' == tag) return new (require('./model/control/combobox'))(wXml, doc, parent);else if ('dropDownList' == tag) return new (require('./model/control/dropdown'))(wXml, doc, parent);else if ('date' == tag) return new (require('./model/control/date'))(wXml, doc, parent);else if ('checkbox' == tag) return new (require('./model/control/checkbox'))(wXml, doc, parent);else if ('richtext' == tag) return new (require('./model/control/richtext'))(wXml, doc, parent);
		}
	} else if ('bookmarkStart' == tag) return new (require('./model/bookmarkStart'))(wXml, doc, parent);else if ('bookmarkEnd' == tag) return new (require('./model/bookmarkEnd'))(wXml, doc, parent);else if ('oMath' == tag) return new (require('./model/equation'))(wXml, doc, parent);else if ('object' == tag) return new (require('./model/OLE'))(wXml, doc, parent);else if ('sectPr' == tag) return new (require('./model/section'))(wXml, doc, parent);

	return new _model2.default(wXml, doc, parent);
}

/**
* you can extend control
*/
factory.extendControl = function (type, wXml, doc, parent) {};

factory.extend = function () {};
module.exports = exports['default'];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9vcGVueG1sL2RvY3gvZmFjdG9yeS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztrQkFNd0I7O0FBTnhCOzs7Ozs7QUFFQSxTQUFTLElBQVQsQ0FBYyxJQUFkLEVBQWdDO0tBQWIsNkRBQUssdUJBQVE7O0FBQy9CLFFBQU8sT0FBSyxLQUFLLElBQUwsQ0FBVSxJQUFWLENBQUwsR0FBcUIsU0FBckIsQ0FEd0I7Q0FBaEM7O0FBSWUsU0FBUyxPQUFULENBQWlCLElBQWpCLEVBQXVCLEdBQXZCLEVBQTRCLE1BQTVCLEVBQW9DLElBQXBDLEVBQXlDO0FBQ3ZELEtBQUksTUFBSSxLQUFLLFNBQUw7S0FBZ0IsSUFBeEIsQ0FEdUQ7O0FBR3ZELEtBQUksV0FBUyxRQUFRLE1BQVIsZ0JBQWtCLFNBQWxCLENBQVQsQ0FIbUQ7O0FBS3ZELEtBQUcsUUFBSCxFQUNDLE9BQU8sUUFBUCxDQURELEtBRUssSUFBRyxjQUFZLEdBQVosRUFDUCxPQUFPLEtBQUssUUFBUSxrQkFBUixFQUFMLENBQWtDLElBQWxDLEVBQXVDLEdBQXZDLEVBQTRDLE1BQTVDLENBQVAsQ0FESSxLQUVBLElBQUcsWUFBVSxHQUFWLEVBQ1AsT0FBTyxLQUFLLFFBQVEsd0JBQVIsRUFBTCxDQUF3QyxJQUF4QyxFQUE2QyxHQUE3QyxDQUFQLENBREksS0FFQSxJQUFHLGlCQUFlLEdBQWYsRUFDUCxPQUFPLEtBQUssUUFBUSxtQ0FBUixFQUFMLENBQW1ELElBQW5ELEVBQXdELEdBQXhELENBQVAsQ0FESSxLQUVBLElBQUcsU0FBTyxHQUFQLEVBQ1AsT0FBTyxLQUFLLFFBQVEsb0JBQVIsRUFBTCxDQUFvQyxJQUFwQyxFQUF5QyxHQUF6QyxDQUFQLENBREksS0FFQSxJQUFHLFdBQVMsR0FBVCxFQUFhO0FBQ3BCLFVBQU8sS0FBSyxJQUFMLENBQVUsUUFBVixDQUFQO0FBQ0EsUUFBSyxXQUFMO0FBQ0MsV0FBTyxLQUFLLFFBQVEseUJBQVIsRUFBTCxDQUF5QyxJQUF6QyxF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QW1CLEdBQW5CLEVBQXVCLE1BQXZCLEVBQThCLEVBQTlCOztBQUV0QixRQUFRLE1BQVIsR0FBZSxZQUFVLEVBQVYiLCJmaWxlIjoiZmFjdG9yeS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBNb2RlbCBmcm9tICcuL21vZGVsJ1xuXG5mdW5jdGlvbiBhdHRyKG5vZGUsbmFtZT0ndzp2YWwnKXtcblx0cmV0dXJuIG5vZGU/bm9kZS5hdHRyKG5hbWUpOnVuZGVmaW5lZFxufVxuXG5leHBvcnQgZGVmYXVsdFx0ZnVuY3Rpb24gZmFjdG9yeSh3WG1sLCBkb2MsIHBhcmVudCwgbW9yZSl7XG5cdHZhciB0YWc9d1htbC5sb2NhbE5hbWUsIHN3YXA7XG5cblx0bGV0IGV4dGVuZGVkPWZhY3RvcnkuZXh0ZW5kKC4uLmFyZ3VtZW50cylcblxuXHRpZihleHRlbmRlZClcblx0XHRyZXR1cm4gZXh0ZW5kZWRcblx0ZWxzZSBpZignZG9jdW1lbnQnPT10YWcpXG5cdFx0cmV0dXJuIG5ldyAocmVxdWlyZSgnLi9tb2RlbC9kb2N1bWVudCcpKSh3WG1sLGRvYywgcGFyZW50KVxuXHRlbHNlIGlmKCdzdHlsZXMnPT10YWcpXG5cdFx0cmV0dXJuIG5ldyAocmVxdWlyZSgnLi9tb2RlbC9kb2N1bWVudFN0eWxlcycpKSh3WG1sLGRvYylcblx0ZWxzZSBpZignYWJzdHJhY3ROdW0nPT10YWcpXG5cdFx0cmV0dXJuIG5ldyAocmVxdWlyZSgnLi9tb2RlbC9zdHlsZS9udW1iZXJpbmdEZWZpbml0aW9uJykpKHdYbWwsZG9jKVxuXHRlbHNlIGlmKCdudW0nPT10YWcpXG5cdFx0cmV0dXJuIG5ldyAocmVxdWlyZSgnLi9tb2RlbC9zdHlsZS9saXN0JykpKHdYbWwsZG9jKVxuXHRlbHNlIGlmKCdzdHlsZSc9PXRhZyl7XG5cdFx0c3dpdGNoKHdYbWwuYXR0cigndzp0eXBlJykpe1xuXHRcdGNhc2UgJ3BhcmFncmFwaCc6XG5cdFx0XHRyZXR1cm4gbmV3IChyZXF1aXJlKCcuL21vZGVsL3N0eWxlL3BhcmFncmFwaCcpKSh3WG1sLGRvYylcblx0XHRjYXNlICdjaGFyYWN0ZXInOlxuXHRcdFx0cmV0dXJuIG5ldyAocmVxdWlyZSgnLi9tb2RlbC9zdHlsZS9pbmxpbmUnKSkod1htbCxkb2MpXG5cdFx0Y2FzZSAndGFibGUnOlxuXHRcdFx0cmV0dXJuIG5ldyAocmVxdWlyZSgnLi9tb2RlbC9zdHlsZS90YWJsZScpKSh3WG1sLGRvYylcblx0XHRjYXNlICdudW1iZXJpbmcnOlxuXHRcdFx0cmV0dXJuIG5ldyAocmVxdWlyZSgnLi9tb2RlbC9zdHlsZS9udW1iZXJpbmcnKSkod1htbCxkb2MpXG5cdFx0fVxuXHR9ZWxzZSBpZignZG9jRGVmYXVsdHMnPT10YWcpXG5cdFx0cmV0dXJuIG5ldyAocmVxdWlyZSgnLi9tb2RlbC9zdHlsZS9kb2N1bWVudCcpKSh3WG1sLGRvYylcblx0ZWxzZSBpZignYm9keSc9PXRhZylcblx0XHRyZXR1cm4gbmV3IChyZXF1aXJlKCcuL21vZGVsL2JvZHknKSkod1htbCxkb2MsIHBhcmVudClcblx0ZWxzZSBpZigncCc9PXRhZyl7XG5cdFx0dmFyIHN0eWxlSWQ9YXR0cih3WG1sLiQxKCc+cFByPnBTdHlsZScpLCd3OnZhbCcpLCBzdHlsZT1kb2Muc3R5bGUuZ2V0KHN0eWxlSWQpXG5cdFx0aWYod1htbC4kMSgnPnBQcj5udW1QcicpIHx8IChzdHlsZSAmJiBzdHlsZS5nZXROdW1JZCgpIT0tMSkpXG5cdFx0XHRyZXR1cm4gbmV3IChyZXF1aXJlKCcuL21vZGVsL2xpc3QnKSkod1htbCxkb2MscGFyZW50KVxuXG5cdFx0bGV0IG91dGxpbmVMdmw9LTEsdG1wXG5cdFx0aWYoc3R5bGUpXG5cdFx0XHRvdXRsaW5lTHZsPXN0eWxlLmdldE91dGxpbmVMZXZlbCgpXG5cdFx0ZWxzZSBpZih0bXA9d1htbC4kMSgnPnBQcj5vdXRsaW5lTHZsJykpe1xuXHRcdFx0dG1wPXBhcnNlSW50KGF0dHIodG1wKSlcblx0XHRcdG91dGxpbmVMdmw9cGFyc2VJbnQodG1wKVxuXHRcdH1cblxuXHRcdGlmKG91dGxpbmVMdmwhPS0xKVxuXHRcdFx0cmV0dXJuIG5ldyAocmVxdWlyZSgnLi9tb2RlbC9oZWFkaW5nJykpKHdYbWwsZG9jLCBwYXJlbnQsb3V0bGluZUx2bClcblxuXHRcdHJldHVybiBuZXcgKHJlcXVpcmUoJy4vbW9kZWwvcGFyYWdyYXBoJykpKHdYbWwsZG9jLHBhcmVudClcblx0fWVsc2UgaWYoJ3InPT10YWcpe1xuXHRcdGxldCBzdHlsZT1kb2Muc3R5bGUuZ2V0KGF0dHIod1htbC4kMSgnPnJQcj5yU3R5bGUnKSwndzp2YWwnKSlcblxuXHRcdGxldCBvdXRsaW5lTHZsPS0xLCB0bXBcblx0XHRpZihzdHlsZSlcblx0XHRcdG91dGxpbmVMdmw9c3R5bGUuZ2V0T3V0bGluZUxldmVsKClcblx0XHRlbHNlIGlmKHRtcD13WG1sLiQxKCc+clByPm91dGxpbmVMdmwnKSl7XG5cdFx0XHR0bXA9YXR0cih0bXApXG5cdFx0XHRvdXRsaW5lTHZsPXBhcnNlSW50KHRtcClcblx0XHR9XG5cblx0XHRpZihvdXRsaW5lTHZsIT0tMSlcblx0XHRcdHJldHVybiBuZXcgKHJlcXVpcmUoJy4vbW9kZWwvaGVhZGluZ0lubGluZScpKSh3WG1sLGRvYyxwYXJlbnQsb3V0bGluZUx2bClcblxuXHRcdGlmKHdYbWwuY2hpbGROb2Rlcy5sZW5ndGg9PTEgfHwgKHdYbWwuY2hpbGROb2Rlcz09MiAmJiB3WG1sLmZpcnN0Q2hpbGQubG9jYWxOYW1lPT0nclByJykpe1xuXHRcdFx0c3dpdGNoKHdYbWwubGFzdENoaWxkLmxvY2FsTmFtZSl7XG5cdFx0XHRjYXNlICdmbGRDaGFyJzpcblx0XHRcdGNhc2UgJ2luc3RyVGV4dCc6XG5cdFx0XHRcdHJldHVybiBmYWN0b3J5KHdYbWwubGFzdENoaWxkLGRvYyxwYXJlbnQpXG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIG5ldyAocmVxdWlyZSgnLi9tb2RlbC9pbmxpbmUnKSkod1htbCxkb2MscGFyZW50KVxuXHR9ZWxzZSBpZignaW5zdHJUZXh0Jz09dGFnKVxuXHRcdFx0cmV0dXJuIG5ldyAocmVxdWlyZSgnLi9tb2RlbC9maWVsZEluc3RydWN0JykpKHdYbWwsIGRvYyxwYXJlbnQpXG5cdGVsc2UgaWYoJ3QnPT10YWcpXG5cdFx0cmV0dXJuIG5ldyAocmVxdWlyZSgnLi9tb2RlbC90ZXh0JykpKHdYbWwsZG9jLHBhcmVudClcblx0ZWxzZSBpZignc3ltJz09dGFnICYmIHdYbWwucGFyZW50Tm9kZS5sb2NhbE5hbWU9PSdyJylcblx0XHRyZXR1cm4gbmV3IChyZXF1aXJlKCcuL21vZGVsL3N5bWJvbCcpKSh3WG1sLGRvYyxwYXJlbnQpXG5cdGVsc2UgaWYoJ3NvZnRIeXBoZW4nPT10YWcgJiYgd1htbC5wYXJlbnROb2RlLmxvY2FsTmFtZT09J3InKVxuXHRcdHJldHVybiBuZXcgKHJlcXVpcmUoJy4vbW9kZWwvc29mdEh5cGhlbicpKSh3WG1sLGRvYyxwYXJlbnQpXG5cdGVsc2UgaWYoJ25vQnJlYWtIeXBoZW4nPT10YWcgJiYgd1htbC5wYXJlbnROb2RlLmxvY2FsTmFtZT09J3InKVxuXHRcdHJldHVybiBuZXcgKHJlcXVpcmUoJy4vbW9kZWwvbm9CcmVha0h5cGhlbicpKSh3WG1sLGRvYyxwYXJlbnQpXG5cdGVsc2UgaWYoJ3RhYic9PXRhZyAmJiB3WG1sLnBhcmVudE5vZGUubG9jYWxOYW1lPT0ncicpXG5cdFx0cmV0dXJuIG5ldyAocmVxdWlyZSgnLi9tb2RlbC90YWInKSkod1htbCxkb2MscGFyZW50KVxuXHRlbHNlIGlmKCdmbGRTaW1wbGUnPT10YWcpXG5cdFx0cmV0dXJuIG5ldyAocmVxdWlyZSgnLi9tb2RlbC9maWVsZFNpbXBsZScpKSh3WG1sLGRvYyxwYXJlbnQpXG5cdGVsc2UgaWYoJ2ZsZENoYXInPT10YWcpe1xuXHRcdHN3aXRjaCh3WG1sLmF0dHIoJ3c6ZmxkQ2hhclR5cGUnKSl7XG5cdFx0Y2FzZSAnYmVnaW4nOlxuXHRcdFx0cmV0dXJuIG5ldyAocmVxdWlyZSgnLi9tb2RlbC9maWVsZEJlZ2luJykpKHdYbWwsZG9jLHBhcmVudClcblx0XHRicmVha1xuXHRcdGNhc2UgJ2VuZCc6XG5cdFx0XHRyZXR1cm4gbmV3IChyZXF1aXJlKCcuL21vZGVsL2ZpZWxkRW5kJykpKHdYbWwsZG9jLHBhcmVudClcblx0XHRicmVha1xuXHRcdGNhc2UgJ3NlcGFyYXRlJzpcblx0XHRcdHJldHVybiBuZXcgKHJlcXVpcmUoJy4vbW9kZWwvZmllbGRTZXBhcmF0ZScpKSh3WG1sLGRvYyxwYXJlbnQpXG5cdFx0YnJlYWtcblx0XHR9XG5cdH1lbHNlIGlmKCd0YmwnPT10YWcpXG5cdFx0cmV0dXJuIG5ldyAocmVxdWlyZSgnLi9tb2RlbC90YWJsZScpKSh3WG1sLGRvYyxwYXJlbnQpXG5cdGVsc2UgaWYoJ3RyJz09dGFnKVxuXHRcdHJldHVybiBuZXcgKHJlcXVpcmUoJy4vbW9kZWwvcm93JykpKHdYbWwsZG9jLHBhcmVudClcblx0ZWxzZSBpZigndGMnPT10YWcpXG5cdFx0cmV0dXJuIG5ldyAocmVxdWlyZSgnLi9tb2RlbC9jZWxsJykpKHdYbWwsZG9jLHBhcmVudClcblx0ZWxzZSBpZignYnInPT10YWcpXG5cdFx0cmV0dXJuIG5ldyAocmVxdWlyZSgnLi9tb2RlbC9icicpKSh3WG1sLGRvYyxwYXJlbnQpXG5cdGVsc2UgaWYoJ2h5cGVybGluayc9PXRhZyAmJiAncCc9PXdYbWwucGFyZW50Tm9kZS5sb2NhbE5hbWUpXG5cdFx0cmV0dXJuIG5ldyAocmVxdWlyZSgnLi9tb2RlbC9oeXBlcmxpbmsnKSkod1htbCxkb2MscGFyZW50KVxuXHRlbHNlIGlmKCdBbHRlcm5hdGVDb250ZW50Jz09dGFnKVxuXHRcdHJldHVybiBuZXcgKHJlcXVpcmUoJy4vbW9kZWwvZHJhd2luZ0FuY2hvcicpKSh3WG1sLGRvYyxwYXJlbnQpXG5cdGVsc2UgaWYoJ3dzcCc9PXRhZylcblx0XHRyZXR1cm4gbmV3IChyZXF1aXJlKCcuL21vZGVsL3NoYXBlJykpKHdYbWwsZG9jLHBhcmVudClcblx0ZWxzZSBpZignaW5saW5lJz09dGFnKXtcblx0XHR2YXIgdHlwZT13WG1sLiQxKCc+Z3JhcGhpYz5ncmFwaGljRGF0YScpLmF0dHIoJ3VyaScpLnNwbGl0KCcvJykucG9wKClcblx0XHRzd2l0Y2godHlwZSl7XG5cdFx0Y2FzZSAncGljdHVyZSc6XG5cdFx0XHRyZXR1cm4gbmV3IChyZXF1aXJlKCcuL21vZGVsL2ltYWdlJykpKHdYbWwsZG9jLHBhcmVudClcblx0XHRjYXNlICdkaWFncmFtJzpcblx0XHRcdHJldHVybiBuZXcgKHJlcXVpcmUoJy4vbW9kZWwvZGlhZ3JhbScpKSh3WG1sLGRvYyxwYXJlbnQpXG5cdFx0Y2FzZSAnY2hhcnQnOlxuXHRcdFx0cmV0dXJuIG5ldyAocmVxdWlyZSgnLi9tb2RlbC9jaGFydCcpKSh3WG1sLGRvYyxwYXJlbnQpXG5cdFx0ZGVmYXVsdDpcblx0XHRcdGNvbnNvbGUuZXJyb3IoJ2lubGluZSAnK3R5cGUgKycgaXMgbm90IHN1cHBvcmVkIHlldC4nKVxuXHRcdH1cblx0fWVsc2UgaWYoJ3NkdCc9PXRhZyl7XG5cdFx0dmFyIGVsQmluZGluZz13WG1sLiQxKCc+c2R0UHI+ZGF0YUJpbmRpbmcnKVxuXHRcdGlmKGVsQmluZGluZyl7Ly9wcm9wZXJ0aWVzXG5cdFx0XHR2YXIgcGF0aD1hdHRyKGVsQmluZGluZywgJ3c6eHBhdGgnKSxcblx0XHRcdFx0ZD1wYXRoLnNwbGl0KC9bXFwvXFw6XFxbXS8pLFxuXHRcdFx0XHRuYW1lPShkLnBvcCgpLGQucG9wKCkpO1xuXHRcdFx0cmV0dXJuIG5ldyAocmVxdWlyZSgnLi9tb2RlbC9kb2N1bWVudFByb3BlcnR5JykpKHdYbWwsZG9jLHBhcmVudCwgbmFtZSlcblx0XHR9ZWxzZSB7Ly9jb250cm9sc1xuXHRcdFx0dmFyIGVsVHlwZT13WG1sLiQxKCc+c2R0UHInKS4kMShcInRleHQsIHBpY3R1cmUsIGRvY1BhcnRMaXN0LCBjb21ib0JveCwgZHJvcERvd25MaXN0LCBkYXRlLCBjaGVja2JveFwiKVxuXHRcdFx0dGFnPWVsVHlwZSA/IGVsVHlwZS5sb2NhbE5hbWUgOiAncmljaHRleHQnXG5cblx0XHRcdGV4dGVuZGVkPWZhY3RvcnkuZXh0ZW5kQ29udHJvbCh0YWcsLi4uYXJndW1lbnRzKVxuXG5cdFx0XHRpZihleHRlbmRlZClcblx0XHRcdFx0cmV0dXJuIGV4dGVuZGVkXG5cdFx0XHRlbHNlIGlmKCd0ZXh0Jz09dGFnKVxuXHRcdFx0XHRyZXR1cm4gbmV3IChyZXF1aXJlKCcuL21vZGVsL2NvbnRyb2wvdGV4dCcpKSh3WG1sLGRvYyxwYXJlbnQpXG5cdFx0XHRlbHNlIGlmKCdwaWN0dXJlJz09dGFnKVxuXHRcdFx0XHRyZXR1cm4gbmV3IChyZXF1aXJlKCcuL21vZGVsL2NvbnRyb2wvcGljdHVyZScpKSh3WG1sLGRvYyxwYXJlbnQpXG5cdFx0XHRlbHNlIGlmKCdkb2NQYXJ0TGlzdCc9PXRhZylcblx0XHRcdFx0cmV0dXJuIG5ldyAocmVxdWlyZSgnLi9tb2RlbC9jb250cm9sL2dhbGxlcnknKSkod1htbCxkb2MscGFyZW50KVxuXHRcdFx0ZWxzZSBpZignY29tYm9Cb3gnPT10YWcpXG5cdFx0XHRcdHJldHVybiBuZXcgKHJlcXVpcmUoJy4vbW9kZWwvY29udHJvbC9jb21ib2JveCcpKSh3WG1sLGRvYyxwYXJlbnQpXG5cdFx0XHRlbHNlIGlmKCdkcm9wRG93bkxpc3QnPT10YWcpXG5cdFx0XHRcdHJldHVybiBuZXcgKHJlcXVpcmUoJy4vbW9kZWwvY29udHJvbC9kcm9wZG93bicpKSh3WG1sLGRvYyxwYXJlbnQpXG5cdFx0XHRlbHNlIGlmKCdkYXRlJz09dGFnKVxuXHRcdFx0XHRyZXR1cm4gbmV3IChyZXF1aXJlKCcuL21vZGVsL2NvbnRyb2wvZGF0ZScpKSh3WG1sLGRvYyxwYXJlbnQpXG5cdFx0XHRlbHNlIGlmKCdjaGVja2JveCc9PXRhZylcblx0XHRcdFx0cmV0dXJuIG5ldyAocmVxdWlyZSgnLi9tb2RlbC9jb250cm9sL2NoZWNrYm94JykpKHdYbWwsZG9jLHBhcmVudClcblx0XHRcdGVsc2UgaWYoJ3JpY2h0ZXh0Jz09dGFnKVxuXHRcdFx0XHRyZXR1cm4gbmV3IChyZXF1aXJlKCcuL21vZGVsL2NvbnRyb2wvcmljaHRleHQnKSkod1htbCxkb2MscGFyZW50KVxuXHRcdH1cblx0fWVsc2UgaWYoJ2Jvb2ttYXJrU3RhcnQnPT10YWcpXG5cdFx0cmV0dXJuIG5ldyAocmVxdWlyZSgnLi9tb2RlbC9ib29rbWFya1N0YXJ0JykpKHdYbWwsZG9jLHBhcmVudClcblx0ZWxzZSBpZignYm9va21hcmtFbmQnPT10YWcpXG5cdFx0cmV0dXJuIG5ldyAocmVxdWlyZSgnLi9tb2RlbC9ib29rbWFya0VuZCcpKSh3WG1sLGRvYyxwYXJlbnQpXG5cdGVsc2UgaWYoJ29NYXRoJz09dGFnKVxuXHRcdHJldHVybiBuZXcgKHJlcXVpcmUoJy4vbW9kZWwvZXF1YXRpb24nKSkod1htbCxkb2MscGFyZW50KVxuXHRlbHNlIGlmKCdvYmplY3QnPT10YWcpXG5cdFx0cmV0dXJuIG5ldyAocmVxdWlyZSgnLi9tb2RlbC9PTEUnKSkod1htbCxkb2MscGFyZW50KVxuXHRlbHNlIGlmKCdzZWN0UHInPT10YWcpXG5cdFx0cmV0dXJuIG5ldyAocmVxdWlyZSgnLi9tb2RlbC9zZWN0aW9uJykpKHdYbWwsZG9jLHBhcmVudClcblxuXHRyZXR1cm4gbmV3IE1vZGVsKHdYbWwsZG9jLHBhcmVudClcbn1cblxuLyoqXG4qIHlvdSBjYW4gZXh0ZW5kIGNvbnRyb2xcbiovXG5mYWN0b3J5LmV4dGVuZENvbnRyb2w9ZnVuY3Rpb24odHlwZSx3WG1sLGRvYyxwYXJlbnQpe31cblxuZmFjdG9yeS5leHRlbmQ9ZnVuY3Rpb24oKXt9XG4iXX0=